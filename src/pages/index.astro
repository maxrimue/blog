---
import Layout from "../layouts/Layout.astro";
import FormattedDate from "../components/FormattedDate.astro";
import { getCollection } from "astro:content";
import Copy from "../components/typography/Copy.astro";
import Link from "../components/typography/Link.astro";

const posts = (await getCollection("blog"))
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 3);
---

<Layout>
  <section class="w-full max-w-2xl mx-auto py-8 px-4 text-center">
    <h1 class="text-3xl font-bold tracking-tight sm:text-4xl">
      Hi, I'm Max ðŸ‘‹
    </h1>
    <p class="mt-3 text-base text-gray-600 dark:text-gray-300">
      I try to write about web development, performance, and things I'm
      learning.
    </p>
  </section>

  <div
    class="w-full max-w-4xl grid grid-cols-1 gap-4 sm:gap-6 md:grid-cols-2 mx-auto pb-8"
  >
    <section class="rounded-2xl bg-gray-50 p-5 dark:bg-gray-800 sm:p-6 md:p-8">
      <div class="flex items-baseline justify-between gap-3">
        <h2 class="text-xl font-semibold tracking-tight sm:text-2xl">
          Latest posts
        </h2>
      </div>
      {
        posts.length === 0 ? (
          <Copy>No posts yet. Check back soon.</Copy>
        ) : (
          <ul class="mt-5 grid grid-cols-1 gap-4 sm:grid-cols-2">
            {posts.map((post) => (
              <li class="rounded-lg bg-white p-4 shadow-sm transition hover:shadow md:p-5 dark:bg-gray-900">
                <a
                  href={`/blog/${post.id}/`}
                  class="block focus:outline-none focus:ring-2 focus:ring-blue-500"
                >
                  <h3 class="text-base font-medium text-gray-900 dark:text-gray-100">
                    {post.data.title}
                  </h3>
                  <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">
                    <FormattedDate date={post.data.pubDate} />
                  </p>
                  <p class="mt-2 line-clamp-3 text-sm text-gray-700 dark:text-gray-300">
                    {post.data.description}
                  </p>
                  <span class="mt-3 inline-block text-sm font-medium text-blue-700 dark:text-blue-400">
                    Read more â†’
                  </span>
                </a>
              </li>
            ))}
          </ul>
        )
      }
    </section>

    <section class="rounded-2xl bg-gray-50 p-5 dark:bg-gray-800 sm:p-6 md:p-8">
      <h2 class="text-xl font-semibold tracking-tight sm:text-2xl">Socials</h2>
      <nav class="mt-4 grid grid-cols-1 gap-2 sm:grid-cols-2">
        <a
          href="https://github.com/maxrimue"
          target="_blank"
          rel="noreferrer"
          class="rounded-lg bg-white px-4 py-3 text-sm text-gray-800 shadow-sm transition hover:shadow dark:bg-gray-900 dark:text-gray-200"
          >GitHub</a
        >
        <a
          href="https://mastodon.social/@maxrimue"
          target="_blank"
          rel="noreferrer"
          class="rounded-lg bg-white px-4 py-3 text-sm text-gray-800 shadow-sm transition hover:shadow dark:bg-gray-900 dark:text-gray-200"
          >Mastodon</a
        >
        <a
          href="https://www.linkedin.com/in/max-r-301b99113/"
          target="_blank"
          rel="noreferrer"
          class="rounded-lg bg-white px-4 py-3 text-sm text-gray-800 shadow-sm transition hover:shadow dark:bg-gray-900 dark:text-gray-200"
          >LinkedIn</a
        >
        <a
          href="/rss.xml"
          class="rounded-lg bg-white px-4 py-3 text-sm text-gray-800 shadow-sm transition hover:shadow dark:bg-gray-900 dark:text-gray-200"
          >RSS</a
        >
      </nav>
    </section>
  </div>
</Layout>
